
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Fast embeddable key-value store designed for SSDs and persistent memory">
      
      
      
      
        <link rel="canonical" href="https://github.com/hse-project/2.x/api/Files/hse_8h/">
      
      <link rel="icon" href="../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>hse/hse.h - HSE Project</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hsehseh" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="HSE Project" class="md-header__button md-logo" aria-label="HSE Project" data-md-component="logo">
      
  <img src="../../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HSE Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              hse/hse.h
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/hse-project/hse" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hse-project/hse
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../gs/about/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../dev/concepts/" class="md-tabs__link">
        Developing HSE Apps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../res/community/" class="md-tabs__link">
        Resources
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        API Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="HSE Project" class="md-nav__button md-logo" aria-label="HSE Project" data-md-component="logo">
      
  <img src="../../../img/logo.png" alt="logo">

    </a>
    HSE Project
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/hse-project/hse" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hse-project/hse
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../gs/about/" class="md-nav__link">
        About
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../gs/storage/" class="md-nav__link">
        KVDB Storage
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../gs/params/" class="md-nav__link">
        Configuration Parameters
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../gs/cli/" class="md-nav__link">
        Command Line Interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../gs/sysreqs/" class="md-nav__link">
        System Requirements
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Developing HSE Apps
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developing HSE Apps" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developing HSE Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/bp/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/limits/" class="md-nav__link">
        Limits
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Resources
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../res/community/" class="md-nav__link">
        Community
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../res/benchmarking/" class="md-nav__link">
        Benchmarking Tips
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        API Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__ERROR__HANDLING/" class="md-nav__link">
        HSE Return Codes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__TYPES/" class="md-nav__link">
        Type Declarations, Shared Structures and Macros
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__INIT/" class="md-nav__link">
        Initialization Routines
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__LIFECYCLE/" class="md-nav__link">
        Primary Lifecycle Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__CRUD/" class="md-nav__link">
        Create, Read, Update and Delete (CRUD) Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__TXN/" class="md-nav__link">
        Transaction Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__CURSOR/" class="md-nav__link">
        Cursor Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__DSTATE/" class="md-nav__link">
        Data State Management Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/group__LIMITS/" class="md-nav__link">
        Limits
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Pages/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Files
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defines" class="md-nav__link">
    Defines
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-documentation" class="md-nav__link">
    Functions Documentation
  </a>
  
    <nav class="md-nav" aria-label="Functions Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-hse_strerror" class="md-nav__link">
    function hse_strerror
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_err_to_errno" class="md-nav__link">
    function hse_err_to_errno
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_init" class="md-nav__link">
    function hse_init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_fini" class="md-nav__link">
    function hse_fini
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_create" class="md-nav__link">
    function hse_kvdb_create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_drop" class="md-nav__link">
    function hse_kvdb_drop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_open" class="md-nav__link">
    function hse_kvdb_open
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_close" class="md-nav__link">
    function hse_kvdb_close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_kvs_names_get" class="md-nav__link">
    function hse_kvdb_kvs_names_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_kvs_names_free" class="md-nav__link">
    function hse_kvdb_kvs_names_free
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_kvs_create" class="md-nav__link">
    function hse_kvdb_kvs_create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_kvs_drop" class="md-nav__link">
    function hse_kvdb_kvs_drop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_kvs_open" class="md-nav__link">
    function hse_kvdb_kvs_open
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_kvs_close" class="md-nav__link">
    function hse_kvdb_kvs_close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_put" class="md-nav__link">
    function hse_kvs_put
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_get" class="md-nav__link">
    function hse_kvs_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_delete" class="md-nav__link">
    function hse_kvs_delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_prefix_delete" class="md-nav__link">
    function hse_kvs_prefix_delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_alloc" class="md-nav__link">
    function hse_kvdb_txn_alloc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_free" class="md-nav__link">
    function hse_kvdb_txn_free
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_begin" class="md-nav__link">
    function hse_kvdb_txn_begin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_commit" class="md-nav__link">
    function hse_kvdb_txn_commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_abort" class="md-nav__link">
    function hse_kvdb_txn_abort
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_state_get" class="md-nav__link">
    function hse_kvdb_txn_state_get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_cursor_create" class="md-nav__link">
    function hse_kvs_cursor_create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_cursor_update_view" class="md-nav__link">
    function hse_kvs_cursor_update_view
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_cursor_seek" class="md-nav__link">
    function hse_kvs_cursor_seek
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_cursor_seek_range" class="md-nav__link">
    function hse_kvs_cursor_seek_range
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_cursor_read" class="md-nav__link">
    function hse_kvs_cursor_read
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvs_cursor_destroy" class="md-nav__link">
    function hse_kvs_cursor_destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_sync" class="md-nav__link">
    function hse_kvdb_sync
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_storage_add" class="md-nav__link">
    function hse_kvdb_storage_add
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#macros-documentation" class="md-nav__link">
    Macros Documentation
  </a>
  
    <nav class="md-nav" aria-label="Macros Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-hse_export" class="md-nav__link">
    define HSE_EXPORT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-hse_export_experimental" class="md-nav__link">
    define HSE_EXPORT_EXPERIMENTAL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-code" class="md-nav__link">
    Source code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="hsehseh">hse/hse.h</h1>
<h2 id="functions">Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>HSE_EXPORT size_t</td>
<td><strong><a href="/2.x/api/Modules/group__ERROR__HANDLING/#function-hse_strerror">hse_strerror</a></strong>(<a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a> err, char * buf, size_t buf_len)<br>Return an hse_err_t value's string representation.</td>
</tr>
<tr>
<td>HSE_EXPORT int</td>
<td><strong><a href="/2.x/api/Modules/group__ERROR__HANDLING/#function-hse_err_to_errno">hse_err_to_errno</a></strong>(<a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a> err)<br>Return an hse_err_t value's errno representation.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__INIT/#function-hse_init">hse_init</a></strong>(const char * config, size_t paramc, const char *const * paramv)<br>Initialize the HSE subsystem.</td>
</tr>
<tr>
<td>HSE_EXPORT void</td>
<td><strong><a href="/2.x/api/Modules/group__INIT/#function-hse_fini">hse_fini</a></strong>(void )<br>Shutdown the HSE subsystem.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_create">hse_kvdb_create</a></strong>(const char * kvdb_home, size_t paramc, const char *const * paramv)<br>Create a KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_drop">hse_kvdb_drop</a></strong>(const char * kvdb_home)<br>Drop a KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open</a></strong>(const char * kvdb_home, size_t paramc, const char <em>const * paramv, struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> </em>* kvdb)<br>Open a KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_close">hse_kvdb_close</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb)<br>Close a KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_names_get">hse_kvdb_kvs_names_get</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, size_t * namec, char *** namev)<br>Get the names of the KVSs within the given KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT void</td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_names_free">hse_kvdb_kvs_names_free</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, char ** namev)<br>Free the names collection obtained through <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_names_get">hse_kvdb_kvs_names_get()</a>.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_create">hse_kvdb_kvs_create</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, const char * kvs_name, size_t paramc, const char *const * paramv)<br>Create a KVS within the referenced KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_drop">hse_kvdb_kvs_drop</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, const char * kvs_name)<br>Drop a KVS from the referenced KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * handle, const char * kvs_name, const size_t paramc, const char <em>const * paramv, struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> </em>* kvs_out)<br>Open a KVS in a KVDB.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_close">hse_kvdb_kvs_close</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> * kvs)<br>Close an open KVS.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_put">hse_kvs_put</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> * kvs, unsigned int flags, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn, const void * key, size_t key_len, const void * val, size_t val_len)<br>Put a key-value pair into KVS.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_get">hse_kvs_get</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> * kvs, unsigned int flags, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn, const void * key, size_t key_len, bool * found, void * buf, size_t buf_len, size_t * val_len)<br>Retrieve the value for a given key from KVS.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_delete">hse_kvs_delete</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> * kvs, unsigned int flags, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn, const void * key, size_t key_len)<br>Delete the key and its associated value from KVS.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_prefix_delete">hse_kvs_prefix_delete</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> * kvs, unsigned int flags, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn, const void * pfx, size_t pfx_len)<br>Delete all key-value pairs matching the key prefix from a KVS storing segmented keys.</td>
</tr>
<tr>
<td>HSE_EXPORT struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> *</td>
<td><strong><a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb)<br>Allocate transaction object.</td>
</tr>
<tr>
<td>HSE_EXPORT void</td>
<td><strong><a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_free">hse_kvdb_txn_free</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Free transaction object.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_begin">hse_kvdb_txn_begin</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Initiate transaction.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_commit">hse_kvdb_txn_commit</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Commit all the mutations of the referenced transaction.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_abort">hse_kvdb_txn_abort</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Abort/rollback transaction.</td>
</tr>
<tr>
<td>HSE_EXPORT enum <a href="/2.x/api/Modules/group__TXN/#enum-hse_kvdb_txn_state">hse_kvdb_txn_state</a></td>
<td><strong><a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_state_get">hse_kvdb_txn_state_get</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Retrieve the state of the referenced transaction.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_create">hse_kvs_cursor_create</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs/">hse_kvs</a> * kvs, unsigned int flags, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn, const void * filter, size_t filter_len, struct <a href="/2.x/api/Structs/structhse__kvs__cursor/">hse_kvs_cursor</a> ** cursor)<br>Creates a cursor used to iterate over key-value pairs in a KVS.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_update_view">hse_kvs_cursor_update_view</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs__cursor/">hse_kvs_cursor</a> * cursor, unsigned int flags)<br>Update a plain cursor or modify any cursor.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_seek">hse_kvs_cursor_seek</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs__cursor/">hse_kvs_cursor</a> * cursor, unsigned int flags, const void * key, size_t key_len, const void ** found, size_t * found_len)<br>Move the cursor to point at the key-value pair at or closest to "key".</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_seek_range">hse_kvs_cursor_seek_range</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs__cursor/">hse_kvs_cursor</a> * cursor, unsigned int flags, const void * filt_min, size_t filt_min_len, const void * filt_max, size_t filt_max_len, const void ** found, size_t * found_len)<br>Move the cursor to the closest match to key, gated by the given filter.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_read">hse_kvs_cursor_read</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs__cursor/">hse_kvs_cursor</a> * cursor, unsigned int flags, const void <strong> key, size_t * key_len, const void </strong> val, size_t * val_len, bool * eof)<br>Iteratively access the elements pointed to by the cursor.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_destroy">hse_kvs_cursor_destroy</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvs__cursor/">hse_kvs_cursor</a> * cursor)<br>Destroy cursor.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__DSTATE/#function-hse_kvdb_sync">hse_kvdb_sync</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, unsigned int flags)<br>Sync data in all of the referenced KVDB's KVSs to stable media and return.</td>
</tr>
<tr>
<td>HSE_EXPORT <a href="/2.x/api/Modules/group__ERROR__HANDLING/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Files/hse_8h/#function-hse_kvdb_storage_add">hse_kvdb_storage_add</a></strong>(const char * kvdb_home, size_t paramc, const char *const * paramv)</td>
</tr>
</tbody>
</table>
<h2 id="defines">Defines</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><strong><a href="/2.x/api/Files/hse_8h/#define-hse_export">HSE_EXPORT</a></strong></td>
</tr>
<tr>
<td></td>
<td><strong><a href="/2.x/api/Files/hse_8h/#define-hse_export_experimental">HSE_EXPORT_EXPERIMENTAL</a></strong></td>
</tr>
</tbody>
</table>
<h2 id="functions-documentation">Functions Documentation</h2>
<h3 id="function-hse_strerror">function hse_strerror</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">hse_strerror</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">err</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Return an hse_err_t value's string representation. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>err</strong> Error value returned from an HSE API function. </li>
<li><strong>buf</strong> Buffer to hold the formatted string. </li>
<li><strong>buf_len</strong> Length of buffer.</li>
</ul>
<p><strong>Return</strong>: The number of characters (excluding the terminating null byte) which would have been written to the final string if enough space had been available. </p>
<p>The hse_err_t scalar value <code>err</code> is decoded into a NULL-terminated string representation giving more information about the error and where it occurred. The string will be truncated if <code>buf_len</code> is too small (a <code>buf_len</code> value of 128 is sufficient to avoid truncation of most error strings). This function is thread safe.</p>
<h3 id="function-hse_err_to_errno">function hse_err_to_errno</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">hse_err_to_errno</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">err</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Return an hse_err_t value's errno representation. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>err</strong> Error value returned from an HSE API function.</li>
</ul>
<p><strong>Return</strong>: The error's errno equivalent. </p>
<p>The hse_err_t scalar value <code>err</code> is translated into its errno equivalent. This function is thread safe.</p>
<h3 id="function-hse_init">function hse_init</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_init</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">config</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">paramv</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Initialize the HSE subsystem. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>config</strong> Path to a global configuration file. </li>
<li><strong>paramc</strong> Number of initialization parameters in <code>paramv</code>. </li>
<li><strong>paramv</strong> List of parameters in key=value format.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>This function initializes a range of different internal HSE structures. It must be called before any other HSE functions are used. It is not thread safe and is idempotent.</p>
<h3 id="function-hse_fini">function hse_fini</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">hse_fini</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Shutdown the HSE subsystem. </p>
<p>This function cleanly finalizes a range of different internal HSE structures. It should be called prior to application exit and is not thread safe. After it is invoked (and even before it returns), calling any other HSE functions will result in undefined behavior. This function is not thread safe. </p>
<h3 id="function-hse_kvdb_create">function hse_kvdb_create</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_create</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb_home</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">paramv</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Create a KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb_home</strong> KVDB home directory, NULL means current working directory. </li>
<li><strong>paramc</strong> Number of configuration parameters in <code>paramv</code>. </li>
<li><strong>paramv</strong> List of parameters in key=value format.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>This function is not thread safe.</p>
<h3 id="function-hse_kvdb_drop">function hse_kvdb_drop</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_drop</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb_home</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Drop a KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb_home</strong> KVDB home directory, NULL means current working directory.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>It is an error to call this function on a KVDB that is open. This function is not thread safe.</p>
<h3 id="function-hse_kvdb_open">function hse_kvdb_open</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_open</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb_home</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">paramv</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">kvdb</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Open a KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb_home</strong> KVDB home directory, NULL means current working directory </li>
<li><strong>paramc</strong> Number of configuration parameters in <code>paramv</code>. </li>
<li><strong>paramv</strong> List of parameters in key=value format. </li>
<li><strong>kvdb</strong> Handle to access the opened KVDB.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>The KVDB must already exist and the client must have permission to use it. This function is not thread safe.</p>
<h3 id="function-hse_kvdb_close">function hse_kvdb_close</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_close</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Close a KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>No client thread may enter the HSE KVDB API with the referenced KVDB after this function starts. This function is not thread safe.</p>
<h3 id="function-hse_kvdb_kvs_names_get">function hse_kvdb_kvs_names_get</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_kvs_names_get</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">namec</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">***</span><span class="w"> </span><span class="n">namev</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Get the names of the KVSs within the given KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>namec</strong> Number of KVSs in the KVDB. </li>
<li><strong>namev</strong> Vector of KVSs. Allocated by the function.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>Key-value stores (KVSs) are opened by name. This function allocates a vector of allocated strings, each containing the NULL-terminated name of a KVS. The memory must be freed via <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_names_free">hse_kvdb_kvs_names_free()</a>. This function is thread safe.</p>
<p>Example Usage:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w">     </span><span class="n">namec</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">rc</span><span class="p">;</span><span class="w"></span>
<span class="kt">char</span><span class="w">  </span><span class="o">**</span><span class="n">namev</span><span class="p">;</span><span class="w"></span>

<span class="n">rc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hse_kvdb_kvs_names_get</span><span class="p">(</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">namec</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">namev</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">rc</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">namec</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">namev</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_names_free</span><span class="p">(</span><span class="n">namev</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><em>Filename: .c</em></p>
<h3 id="function-hse_kvdb_kvs_names_free">function hse_kvdb_kvs_names_free</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">hse_kvdb_kvs_names_free</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">namev</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Free the names collection obtained through <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_names_get">hse_kvdb_kvs_names_get()</a>. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>namev</strong> Vector of KVS names that <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_names_get">hse_kvdb_kvs_names_get()</a> output. </li>
</ul>
<p>This function is thread safe.</p>
<h3 id="function-hse_kvdb_kvs_create">function hse_kvdb_kvs_create</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_kvs_create</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs_name</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">paramv</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Create a KVS within the referenced KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>kvs_name</strong> KVS name (NULL terminated, strlen() &lt; HSE_KVS_NAME_LEN_MAX) </li>
<li><strong>paramc</strong> Number of configuration parameters in <code>paramv</code>. </li>
<li><strong>paramv</strong> List of parameters in key=value format.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>If the KVS will store segmented keys then the parameter "pfx_len" should be set to the desired key prefix length. An error will result if there is already a KVS with the given name. This function is not thread safe.</p>
<h3 id="function-hse_kvdb_kvs_drop">function hse_kvdb_kvs_drop</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_kvs_drop</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs_name</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Drop a KVS from the referenced KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a></li>
<li><strong>kvs_name</strong> KVS name (NULL-terminated string)</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>It is an error to call this function on a KVS that is open. This function is not thread safe.</p>
<h3 id="function-hse_kvdb_kvs_open">function hse_kvdb_kvs_open</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_kvs_open</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">handle</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs_name</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">paramv</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">kvs_out</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Open a KVS in a KVDB. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>handle</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>kvs_name</strong> KVS name (NULL terminated string). </li>
<li><strong>paramc</strong> Number of configuration parameters in <code>paramv</code>. </li>
<li><strong>paramv</strong> List of parameters in key=value format. </li>
<li><strong>kvs_out</strong> Handle to access the opened KVS.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>This function is not thread safe.</p>
<h3 id="function-hse_kvdb_kvs_close">function hse_kvdb_kvs_close</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_kvs_close</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Close an open KVS. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvs</strong> KVS handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open()</a>.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>No client thread may enter the HSE KVDB API with the referenced KVS after this function starts. This function is not thread safe.</p>
<h3 id="function-hse_kvs_put">function hse_kvs_put</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_put</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">val_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Put a key-value pair into KVS. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvs</strong> KVS handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>txn</strong> Transaction context. </li>
<li><strong>key</strong> Key to put into kvs. </li>
<li><strong>key_len</strong> Length of key. </li>
<li><strong>val</strong> Value associated with key. </li>
<li><strong>val_len</strong> Length of value.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>If the key already exists in the KVS then the value is effectively overwritten. The key length must be in the range [1, HSE_KVS_KEY_LEN_MAX] while the value length must be in the range [0, HSE_KVS_VALUE_LEN_MAX]. See the section on transactions for information on how puts within transactions are handled. This function is thread safe.</p>
<p>The HSE KVDB attempts to maintain reasonable QoS and for high-throughput clients this results in very short sleep's being inserted into the put path. For some kinds of data (e.g., control metadata) the client may wish to not experience that delay. For relatively low data rate uses, the caller can set the HSE_FLAG_PUT_PRIORITY flag for an <a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_put">hse_kvs_put()</a>. Care should be taken when doing so to ensure that the system does not become overrun. As a rough approximation, doing 1M priority puts per second marked as PRIORITY is likely an issue. On the other hand, doing 1K small puts per second marked as PRIORITY is almost certainly fine.</p>
<p>If compression is enabled for the given kvs, then <a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_put">hse_kvs_put()</a> will attempt to compress the value unless the HSE_FLAG_PUT_VCOMP_OFF flag is given. Otherwise, the HSE_FLAG_PUT_VCOMP_OFF flag is ignored.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>HSE_FLAG_PUT_PRIORITY - Operation will not be throttled </li>
<li>HSE_FLAG_PUT_VCOMP_OFF - Value will not be compressed</li>
</ul>
<h3 id="function-hse_kvs_get">function hse_kvs_get</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_get</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">val_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Retrieve the value for a given key from KVS. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvs</strong> KVS handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>txn</strong> Transaction context. </li>
<li><strong>key</strong> Key to get from kvs. </li>
<li><strong>key_len</strong> Length of key. </li>
<li><strong>found</strong> Whether or not key was found. </li>
<li><strong>buf</strong> Buffer into which the value associated with key will be copied. </li>
<li><strong>buf_len</strong> Length of buffer. </li>
<li><strong>val_len</strong> Actual length of value if key was found.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>If the key exists in the KVS then the referent of "found" is set to true. If the caller's value buffer is large enough then the data will be returned. Regardless, the actual length of the value is placed in "val_len". See the section on transactions for information on how gets within transactions are handled. This function is thread safe.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvs_delete">function hse_kvs_delete</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">key_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Delete the key and its associated value from KVS. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvs</strong> KVS handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open()</a></li>
<li><strong>flags</strong> Flags for operation specialization </li>
<li><strong>txn</strong> Transaction context (optional) </li>
<li><strong>key</strong> Key to be deleted from kvs </li>
<li><strong>key_len</strong> Length of key</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>It is not an error if the key does not exist within the KVS. See the section on transactions for information on how deletes within transactions are handled. This function is thread safe.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvs_prefix_delete">function hse_kvs_prefix_delete</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_prefix_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pfx</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">pfx_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Delete all key-value pairs matching the key prefix from a KVS storing segmented keys. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvs</strong> KVS handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>txn</strong> Transaction context (optional). </li>
<li><strong>pfx</strong> Prefix of keys to delete. </li>
<li><strong>pfx_len</strong> Prefix length.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>This interface is used to delete an entire range of segmented keys. To do this the caller passes a filter with a length equal to the KVS's key prefix length. It is not an error if no keys exist matching the filter. If there is a filtered iteration in progress, then that iteration can fail if <a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_prefix_delete">hse_kvs_prefix_delete()</a> is called with a filter matching the iteration. This function is thread safe.</p>
<p>If <a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_prefix_delete">hse_kvs_prefix_delete()</a> is called from a transaction context, it affects no key-value mutations that are part of the same transaction. Stated differently, for KVS commands issued within a transaction, all calls to <a href="/2.x/api/Modules/group__CRUD/#function-hse_kvs_prefix_delete">hse_kvs_prefix_delete()</a> are treated as though they were issued serially at the beginning of the transaction regardless of the actual order these commands appeared in.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvdb_txn_alloc">function hse_kvdb_txn_alloc</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">hse_kvdb_txn_alloc</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Allocate transaction object. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>.</li>
</ul>
<p><strong>Return</strong>: The allocated transaction structure. </p>
<p>This object can and should be re-used many times to avoid the overhead of allocation. This function is thread safe.</p>
<h3 id="function-hse_kvdb_txn_free">function hse_kvdb_txn_free</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">hse_kvdb_txn_free</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Free transaction object. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle. </li>
</ul>
<p>If the transaction handle refers to an ACTIVE transaction, the transaction is aborted prior to being freed. This function is thread safe with different transactions.</p>
<h3 id="function-hse_kvdb_txn_begin">function hse_kvdb_txn_begin</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_txn_begin</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Initiate transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>The call fails if the transaction handle refers to an ACTIVE transaction. This function is thread safe with different transactions.</p>
<h3 id="function-hse_kvdb_txn_commit">function hse_kvdb_txn_commit</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_txn_commit</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Commit all the mutations of the referenced transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>The call fails if the referenced transaction is not in the ACTIVE state. This function is thread safe with different transactions.</p>
<h3 id="function-hse_kvdb_txn_abort">function hse_kvdb_txn_abort</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_txn_abort</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Abort/rollback transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>The call fails if the referenced transaction is not in the ACTIVE state. This function is thread safe with different transactions.</p>
<h3 id="function-hse_kvdb_txn_state_get">function hse_kvdb_txn_state_get</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="k">enum</span> <span class="nc">hse_kvdb_txn_state</span><span class="w"> </span><span class="n">hse_kvdb_txn_state_get</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Retrieve the state of the referenced transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TXN/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: The transaction's state </p>
<p>This function is thread safe with different transactions.</p>
<h3 id="function-hse_kvs_cursor_create">function hse_kvs_cursor_create</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_cursor_create</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">filter</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">filter_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">cursor</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Creates a cursor used to iterate over key-value pairs in a KVS. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvs</strong> KVS to iterate over, handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_kvs_open">hse_kvdb_kvs_open()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>txn</strong> Transaction context (optional). </li>
<li><strong>filter</strong> Iteration limited to keys matching this prefix filter (optional). </li>
<li><strong>filter_len</strong> Length of filter (optional). </li>
<li><strong>cursor</strong> Cursor handle.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p><strong>Non-transaction cursors:</strong></p>
<p>If <code>txn</code> is NULL, a non-transaction cursor is created. Non-transaction cursors have an ephemeral snapshot view of the KVS at the time it the cursor is created. The snapshot view is maintained for the life of the cursor. Writes to the KVS (put, deletes, etc.) made after the cursor is created will not be visible to the cursor unless <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_update_view">hse_kvs_cursor_update_view()</a> is used to obtain a more recent snapshot view. Non transaction cursors can be used on transaction and non-transaction KVSs.</p>
<p><strong>Transaction cursors:</strong></p>
<p>If <code>txn</code> is not NULL, it must be a valid transaction handle or undefined behavior will result. If it is a valid handle to a transaction in the ACTIVE state, a transaction cursor is created. A transaction cursor's view includes the transaction's writes overlaid on the transaction's ephemeral snapshot view of the KVS. If the transaction is committed or aborted before the cursor is destroyed, the cursor's view reverts to same snaphsot view the transaction had when first became active. The cursor will no longer be able to see the transaction's writes. Calling <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_update_view">hse_kvs_cursor_update_view()</a> on a transaction cursor is a no-op and has no effect on the cursor's view. Transaction cursors can only be used on transaction KVSs.</p>
<p><strong>Prefix vs non-prefix cursors:</strong></p>
<p>Parameters <code>filter</code> and <code>filter_len</code> can be used to iterate over the subset of keys in the KVS whose first <code>filter_len</code> bytes match the <code>filter_len</code> bytes pointed to by <code>filter</code>.</p>
<p>A prefix cursor is created when: </p>
<ul>
<li>KVS was created with <code>pfx_len</code> &gt; 0 (i.e., it is a prefix KVS), and </li>
<li><code>filter</code> != NULL and <code>filter_len</code> &gt;= @ pfx_len.</li>
</ul>
<p>Otherwise, a non-prefix cursor is created.</p>
<p>Applications should arrange their key-value data to avoid the need for non-prefix cursors as they are significantly slower and more resource-intensive than prefix cursors. Note that simply using a filter doesn't create a prefix cursor &ndash; it must meet the two conditions listed above.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>HSE_FLAG_CURSOR_REVERSE - iterate in reverse lexicographic order</li>
</ul>
<p>This function is thread safe across disparate cursors.</p>
<h3 id="function-hse_kvs_cursor_update_view">function hse_kvs_cursor_update_view</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_cursor_update_view</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Update a plain cursor or modify any cursor. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>cursor</strong> Cursor handle from <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_create">hse_kvs_cursor_create()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>This operation updates the snapshot view of a non-transaction cursor. It is a no-op on transaction cursors. This function is thread safe across disparate cursors.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvs_cursor_seek">function hse_kvs_cursor_seek</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_cursor_seek</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">found_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Move the cursor to point at the key-value pair at or closest to "key". </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>cursor</strong> Cursor handle from <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_create">hse_kvs_cursor_create()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>key</strong> Key to find. </li>
<li><strong>key_len</strong> Length of key. </li>
<li><strong>found</strong> If non-NULL, referent point to next key in sequence (optional). </li>
<li><strong>found_len</strong> If "found" is non-NULL, referent is length of "found" key.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>The next <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_read">hse_kvs_cursor_read()</a> will start at this point. Both "found" and "found_len" must be non-NULL for that functionality to work. This function is thread safe across disparate cursors.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvs_cursor_seek_range">function hse_kvs_cursor_seek_range</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_cursor_seek_range</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">filt_min</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">filt_min_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">filt_max</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">filt_max_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">found_len</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Move the cursor to the closest match to key, gated by the given filter. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>cursor</strong> Cursor handle from <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_create">hse_kvs_cursor_create()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>filt_min</strong> Filter minimum. </li>
<li><strong>filt_min_len</strong> Length of filter minimum. </li>
<li><strong>filt_max</strong> Filter maximum. </li>
<li><strong>filt_max_len</strong> Length of filter maximum. </li>
<li><strong>found</strong> If non-NULL, referent points to next key in sequence (optional). </li>
<li><strong>found_len</strong> If non-NULL, referent is length of "found" key (optional).</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>Keys read from this cursor will belong to the closed interval defined by the given filter: [<code>filt_min</code>, <code>filt_max</code>]. For KVSs storing segmented keys, performance will be enhanced when <code>filt_min_len</code> and <code>filt_max_len</code> are greater than or equal to the KVS key prefix length. Both <code>found</code> and <code>found_len</code> must be non-NULL for that functionality to work. This function is thread safe across disparate cursors.</p>
<p>Note: this is only supported for forward cursors.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvs_cursor_read">function hse_kvs_cursor_read</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_cursor_read</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">val</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">val_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">eof</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Iteratively access the elements pointed to by the cursor. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>cursor</strong> Cursor handle from <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_create">hse_kvs_cursor_create()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization. </li>
<li><strong>key</strong> Next key in sequence. </li>
<li><strong>key_len</strong> Length of key. </li>
<li><strong>val</strong> Next value in sequence. </li>
<li><strong>val_len</strong> Length of value. </li>
<li><strong>eof</strong> If true, no more key-value pairs in sequence.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p>Read a key-value pair from the cursor, advancing the cursor past its current location. If the cursor is at EOF, attempts to read from it will not change the state of the cursor. This function is thread safe across disparate cursors.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>0 - reserved for future use</li>
</ul>
<h3 id="function-hse_kvs_cursor_destroy">function hse_kvs_cursor_destroy</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvs_cursor_destroy</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cursor</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Destroy cursor. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>cursor</strong> Cursor handle from <a href="/2.x/api/Modules/group__CURSOR/#function-hse_kvs_cursor_create">hse_kvs_cursor_create()</a>.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>This function is thread safe.</p>
<h3 id="function-hse_kvdb_sync">function hse_kvdb_sync</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_sync</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Sync data in all of the referenced KVDB's KVSs to stable media and return. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__LIFECYCLE/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>flags</strong> Flags for operation specialization.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p><strong>Flags:</strong></p>
<ul>
<li>HSE_KVDB_SYNC_ASYNC - Return immediately after initiating operation instead of waiting for completion.</li>
</ul>
<h3 id="function-hse_kvdb_storage_add">function hse_kvdb_storage_add</h3>
<div class="highlight"><pre><span></span><code><span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_storage_add</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb_home</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">paramv</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb_home</strong> KVDB home directory, NULL means current working directory. </li>
<li><strong>paramc</strong> Number of configuration parameters in <code>paramv</code>. </li>
<li><strong>paramv</strong> List of KVDB create-time parameters in key=value format.</li>
</ul>
<p><strong>Return</strong>: The function's error status </p>
<p>Add a new media class storage to an existing offline KVDB This function is not thread safe.</p>
<h2 id="macros-documentation">Macros Documentation</h2>
<h3 id="define-hse_export">define HSE_EXPORT</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define HSE_EXPORT </span>
</code></pre></div>
<h3 id="define-hse_export_experimental">define HSE_EXPORT_EXPERIMENTAL</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define HSE_EXPORT_EXPERIMENTAL </span>
</code></pre></div>
<h2 id="source-code">Source code</h2>
<div class="highlight"><pre><span></span><code><span class="cm">/* SPDX-License-Identifier: Apache-2.0 */</span><span class="w"></span>
<span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2015-2021 Micron Technology, Inc.  All rights reserved.</span>
<span class="cm"> */</span><span class="w"></span>

<span class="cp">#ifndef HSE_KVDB_API_H</span>
<span class="cp">#define HSE_KVDB_API_H</span>

<span class="cm">/* MTF_MOCK_DECL(hse) */</span><span class="w"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;hse/flags.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;hse/limits.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;hse/types.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;hse/version.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stddef.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;limits.h&gt;</span><span class="cp"></span>

<span class="cp">#ifdef __cplusplus</span>
<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __has_attribute</span>
<span class="cp">#  if __has_attribute(visibility)</span>
<span class="cp">#    define HSE_EXPORT __attribute__((visibility(&quot;default&quot;)))</span>
<span class="cp">#  else</span>
<span class="cp">#    define HSE_EXPORT</span>
<span class="cp">#  endif</span>
<span class="cp">#else</span>
<span class="cp">#  define HSE_EXPORT</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef HSE_EXPORT_EXPERIMENTAL</span>
<span class="cp">#undef HSE_EXPORT_EXPERIMENTAL</span>
<span class="cp">#define HSE_EXPORT_EXPERIMENTAL HSE_EXPORT</span>
<span class="cp">#else</span>
<span class="cp">#define HSE_EXPORT_EXPERIMENTAL</span>
<span class="cp">#endif</span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">size_t</span><span class="w"></span>
<span class="n">hse_strerror</span><span class="p">(</span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">err</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_len</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">int</span><span class="w"></span>
<span class="n">hse_err_to_errno</span><span class="p">(</span><span class="n">hse_err_t</span><span class="w"> </span><span class="n">err</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_init</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">paramv</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">void</span><span class="w"></span>
<span class="n">hse_fini</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_create</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb_home</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">paramv</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_drop</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb_home</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_open</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w">       </span><span class="n">kvdb_home</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">             </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">paramv</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">kvdb</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_close</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_names_get</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">namec</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">***</span><span class="n">namev</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">void</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_names_free</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">namev</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_create</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w">  </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w">       </span><span class="n">kvs_name</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">             </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">paramv</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_drop</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">kvs_name</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_open</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w">  </span><span class="n">handle</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w">       </span><span class="n">kvs_name</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w">       </span><span class="n">paramc</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">paramv</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">**</span><span class="w">  </span><span class="n">kvs_out</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_kvs_close</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="n">kvs</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_put</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w">     </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">         </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">         </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">               </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">         </span><span class="n">val</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">               </span><span class="n">val_len</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_get</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w">     </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">         </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">         </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">               </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="o">*</span><span class="w">               </span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">               </span><span class="n">buf</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">               </span><span class="n">buf_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">             </span><span class="n">val_len</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w">     </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">         </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">         </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">               </span><span class="n">key_len</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_prefix_delete</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w">     </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">         </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">         </span><span class="n">pfx</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">               </span><span class="n">pfx_len</span><span class="p">);</span><span class="w"></span>

<span class="cp">#ifdef HSE_EXPERIMENTAL</span>
<span class="n">HSE_EXPORT_EXPERIMENTAL</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_prefix_probe</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w">            </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">                </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w">        </span><span class="o">*</span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">                </span><span class="n">pfx</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                      </span><span class="n">pfx_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">enum</span> <span class="nc">hse_kvs_pfx_probe_cnt</span><span class="w"> </span><span class="o">*</span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">                      </span><span class="n">keybuf</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                      </span><span class="n">keybuf_sz</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">                    </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">                      </span><span class="n">valbuf</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                      </span><span class="n">valbuf_sz</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">                    </span><span class="n">val_len</span><span class="p">);</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"></span>
<span class="n">hse_kvdb_txn_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="kt">void</span><span class="w"></span>
<span class="n">hse_kvdb_txn_free</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_txn_begin</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_txn_commit</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_txn_abort</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="k">enum</span> <span class="nc">hse_kvdb_txn_state</span><span class="w"></span>
<span class="n">hse_kvdb_txn_state_get</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="n">txn</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_cursor_create</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs</span><span class="w"> </span><span class="o">*</span><span class="w">        </span><span class="n">kvs</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">            </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w">   </span><span class="n">txn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">            </span><span class="n">filter</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                  </span><span class="n">filter_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">**</span><span class="n">cursor</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_cursor_update_view</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="n">cursor</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_cursor_seek</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">           </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">           </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                 </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w">          </span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">               </span><span class="n">found_len</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_cursor_seek_range</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">           </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">           </span><span class="n">filt_min</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                 </span><span class="n">filt_min_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w">           </span><span class="n">filt_max</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">                 </span><span class="n">filt_max_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w">          </span><span class="n">found</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">               </span><span class="n">found_len</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_cursor_read</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="n">cursor</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">           </span><span class="n">flags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w">          </span><span class="n">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">               </span><span class="n">key_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="w">          </span><span class="n">val</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="w">               </span><span class="n">val_len</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="o">*</span><span class="w">                 </span><span class="n">eof</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvs_cursor_destroy</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvs_cursor</span><span class="w"> </span><span class="o">*</span><span class="n">cursor</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* MTF_MOCK */</span><span class="w"></span>
<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_sync</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* empty here to maintain the order in doxygen output, see include/hse/limits.h */</span><span class="w"></span>

<span class="cp">#ifdef HSE_EXPERIMENTAL</span>
<span class="n">HSE_EXPORT_EXPERIMENTAL</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_compact</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT_EXPERIMENTAL</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_compact_status_get</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_compact_status</span><span class="w"> </span><span class="o">*</span><span class="n">status</span><span class="p">);</span><span class="w"></span>

<span class="n">HSE_EXPORT_EXPERIMENTAL</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_storage_info_get</span><span class="p">(</span><span class="k">struct</span> <span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span> <span class="nc">hse_kvdb_storage_info</span><span class="w"> </span><span class="o">*</span><span class="n">info</span><span class="p">);</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="n">HSE_EXPORT</span><span class="w"> </span><span class="n">hse_err_t</span><span class="w"></span>
<span class="n">hse_kvdb_storage_add</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">kvdb_home</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">paramc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">paramv</span><span class="p">);</span><span class="w"></span>

<span class="cp">#undef HSE_EXPORT_EXPERIMENTAL</span>
<span class="cp">#undef HSE_EXPORT</span>

<span class="cp">#if HSE_MOCKING</span>
<span class="cm">/* This is a complete hack because of the way mocks are generated. HSE_EXPORT</span>
<span class="cm"> * gets pulled as part of the function declaration when creating the function</span>
<span class="cm"> * pointers types for each mocked function.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="cp">#define HSE_EXPORT</span>
<span class="cp">#define HSE_EXPORT_EXPERIMENTAL</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;hse_ut.h&quot;</span><span class="cp"></span>
<span class="cp">#undef HSE_EXPORT_EXPERIMENTAL</span>
<span class="cp">#undef HSE_EXPORT</span>
<span class="cp">#endif </span><span class="cm">/* HSE_MOCKING */</span><span class="cp"></span>

<span class="cp">#ifdef __cplusplus</span>
<span class="p">}</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="cp">#endif</span>
</code></pre></div>
<hr />
<p>Updated on  1 October 2021 at 17:03:30 CDT</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 - 2021 Micron Technology, Inc.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.409db549.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>