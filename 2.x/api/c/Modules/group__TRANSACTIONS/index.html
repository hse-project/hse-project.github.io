
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Fast embeddable key-value store designed for SSDs and persistent memory">
      
      
      
        <link rel="canonical" href="https://hse-project.github.io/2.x/2.x/api/c/Modules/group__TRANSACTIONS/">
      
      <link rel="icon" href="../../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.8">
    
    
      
        <title>Transactions - HSE Project</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.815d1a91.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transactions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  <strong>Notice: HSE 2.x is no longer actively maintained</strong>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="HSE Project" class="md-header__button md-logo" aria-label="HSE Project" data-md-component="logo">
      
  <img src="../../../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HSE Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Transactions
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hse-project/hse" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hse-project/hse
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../gs/about/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../dev/concepts/" class="md-tabs__link">
        Developing HSE Apps
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../res/community/" class="md-tabs__link">
        Resources
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        API Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="HSE Project" class="md-nav__button md-logo" aria-label="HSE Project" data-md-component="logo">
      
  <img src="../../../../img/logo.png" alt="logo">

    </a>
    HSE Project
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hse-project/hse" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hse-project/hse
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gs/about/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gs/storage/" class="md-nav__link">
        KVDB Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gs/params/" class="md-nav__link">
        Configuration Parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gs/cli/" class="md-nav__link">
        Command Line Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gs/sysreqs/" class="md-nav__link">
        System Requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Developing HSE Apps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developing HSE Apps" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developing HSE Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../dev/concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../dev/bp/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../dev/limits/" class="md-nav__link">
        Limits
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../res/community/" class="md-nav__link">
        Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../res/benchmarking/" class="md-nav__link">
        Benchmarking Tips
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../group__VERSION/" class="md-nav__link">
        Version Information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../group__ERRORS/" class="md-nav__link">
        Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../group__SUBSYS/" class="md-nav__link">
        Subsystem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../group__KVDB/" class="md-nav__link">
        Key-Value Database (KVDB)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../group__KVS/" class="md-nav__link">
        Key-Value Store (KVS)
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Transactions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Transactions
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-structures" class="md-nav__link">
    Data Structures
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    Types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-description" class="md-nav__link">
    Detailed Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-documentation" class="md-nav__link">
    Types Documentation
  </a>
  
    <nav class="md-nav" aria-label="Types Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enum-hse_kvdb_txn_state" class="md-nav__link">
    enum hse_kvdb_txn_state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-documentation" class="md-nav__link">
    Functions Documentation
  </a>
  
    <nav class="md-nav" aria-label="Functions Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_abort" class="md-nav__link">
    function hse_kvdb_txn_abort
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_alloc" class="md-nav__link">
    function hse_kvdb_txn_alloc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_begin" class="md-nav__link">
    function hse_kvdb_txn_begin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_commit" class="md-nav__link">
    function hse_kvdb_txn_commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_free" class="md-nav__link">
    function hse_kvdb_txn_free
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_state_get" class="md-nav__link">
    function hse_kvdb_txn_state_get
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../group__CURSORS/" class="md-nav__link">
        Cursors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-structures" class="md-nav__link">
    Data Structures
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    Types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-description" class="md-nav__link">
    Detailed Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-documentation" class="md-nav__link">
    Types Documentation
  </a>
  
    <nav class="md-nav" aria-label="Types Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enum-hse_kvdb_txn_state" class="md-nav__link">
    enum hse_kvdb_txn_state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-documentation" class="md-nav__link">
    Functions Documentation
  </a>
  
    <nav class="md-nav" aria-label="Functions Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_abort" class="md-nav__link">
    function hse_kvdb_txn_abort
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_alloc" class="md-nav__link">
    function hse_kvdb_txn_alloc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_begin" class="md-nav__link">
    function hse_kvdb_txn_begin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_commit" class="md-nav__link">
    function hse_kvdb_txn_commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_free" class="md-nav__link">
    function hse_kvdb_txn_free
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-hse_kvdb_txn_state_get" class="md-nav__link">
    function hse_kvdb_txn_state_get
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="transactions">Transactions</h1>
<p><a href="#detailed-description">More...</a></p>
<h2 id="data-structures">Data Structures</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>struct</td>
<td><strong><a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a></strong> <br>Opaque structure, a pointer to which is a handle to a transaction within a KVDB.</td>
</tr>
</tbody>
</table>
<h2 id="types">Types</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>enum</td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#enum-hse_kvdb_txn_state">hse_kvdb_txn_state</a></strong> { HSE_KVDB_TXN_INVALID = 0, HSE_KVDB_TXN_ACTIVE = 1, HSE_KVDB_TXN_COMMITTED = 2, HSE_KVDB_TXN_ABORTED = 3}<br>Transaction state.</td>
</tr>
</tbody>
</table>
<h2 id="functions">Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/2.x/api/Modules/group__ERRORS/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_abort">hse_kvdb_txn_abort</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Abort/rollback transaction.</td>
</tr>
<tr>
<td>struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> *</td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb)<br>Allocate transaction object.</td>
</tr>
<tr>
<td><a href="/2.x/api/Modules/group__ERRORS/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_begin">hse_kvdb_txn_begin</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Initiate transaction.</td>
</tr>
<tr>
<td><a href="/2.x/api/Modules/group__ERRORS/#typedef-hse_err_t">hse_err_t</a></td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_commit">hse_kvdb_txn_commit</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Commit all the mutations of the referenced transaction.</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_free">hse_kvdb_txn_free</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Free transaction object.</td>
</tr>
<tr>
<td>enum <a href="/2.x/api/Modules/group__TRANSACTIONS/#enum-hse_kvdb_txn_state">hse_kvdb_txn_state</a></td>
<td><strong><a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_state_get">hse_kvdb_txn_state_get</a></strong>(struct <a href="/2.x/api/Structs/structhse__kvdb/">hse_kvdb</a> * kvdb, struct <a href="/2.x/api/Structs/structhse__kvdb__txn/">hse_kvdb_txn</a> * txn)<br>Retrieve the state of the referenced transaction.</td>
</tr>
</tbody>
</table>
<h2 id="detailed-description">Detailed Description</h2>
<p>The HSE KVDB provides transactions with operations spanning KVSs within a single KVDB. These transactions have snapshot isolation (a specific form of MVCC) with the normal semantics (see "Concurrency Control and Recovery in
Database Systems" by PA Bernstein).</p>
<p>One unusual aspect of the API as it relates to transactions is that the data object that is used to hold client-level transaction state is allocated separately from the transaction being initiated. As a result, the same object handle should be reused again and again.</p>
<p>In addition, there is very limited coupling between threading and transactions. A single thread may have many transactions in flight simultaneously. Also operations within a transaction can be performed by multiple threads. The latter mode of operation must currently restrict calls so that only one thread is actively performing an operation in the context of a particular transaction at any particular time.</p>
<p>The general lifecycle of a transaction is as follows: </p>
<div class="highlight"><pre><span></span><code>                  +----------+
                  | INVALID  |
                  +----------+
                        |
                        v
                  +----------+
+----------------&gt;|  ACTIVE  |&lt;----------------+
|                 +----------+                 |
|  +-----------+    |      |     +----------+  |
+--| COMMITTED |&lt;---+      +----&gt;| ABORTED  |--+
   +-----------+                 +----------+
</code></pre></div>
<p>When a transaction is initially allocated, it starts in the INVALID state. When <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_begin">hse_kvdb_txn_begin()</a> is called with transaction in the INVALID, COMMITTED, or ABORTED states, it moves to the ACTIVE state. It is an error to call the <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_begin">hse_kvdb_txn_begin()</a> function on a transaction in the ACTIVE state. For a transaction in the ACTIVE state, only the functions <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_commit">hse_kvdb_txn_commit()</a>, <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_abort">hse_kvdb_txn_abort()</a>, or <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_free">hse_kvdb_txn_free()</a> may be called (with the last doing an abort prior to the free).</p>
<p>When a transaction becomes ACTIVE, it establishes an ephemeral snapshot view of the state of the KVDB. Any data mutations outside of the transaction's context after that point are not visible to the transaction. Similarly, any mutations performed within the context of the transaction are not visible outside of the transaction unless and until it is committed. All such mutations become visible atomically when the transaction commits.</p>
<p>Within a transaction whenever a write operation e.g., put, delete, etc., encounters a write conflict, that operation returns an error code of ECANCELED. The caller is then expected to re-try the operation in a new transaction, see <a href="/2.x/api/Modules/group__ERRORS/">Errors</a>. </p>
<h2 id="types-documentation">Types Documentation</h2>
<h3 id="enum-hse_kvdb_txn_state">enum hse_kvdb_txn_state</h3>
<table>
<thead>
<tr>
<th>Enumerator</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>HSE_KVDB_TXN_INVALID</td>
<td>0</td>
<td>invalid state</td>
</tr>
<tr>
<td>HSE_KVDB_TXN_ACTIVE</td>
<td>1</td>
<td>active state</td>
</tr>
<tr>
<td>HSE_KVDB_TXN_COMMITTED</td>
<td>2</td>
<td>committed state</td>
</tr>
<tr>
<td>HSE_KVDB_TXN_ABORTED</td>
<td>3</td>
<td>aborted state</td>
</tr>
</tbody>
</table>
<p>Transaction state. </p>
<h2 id="functions-documentation">Functions Documentation</h2>
<h3 id="function-hse_kvdb_txn_abort">function hse_kvdb_txn_abort</h3>
<div class="highlight"><pre><span></span><code><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_txn_abort</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Abort/rollback transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__KVDB/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: Error status. </p>
<p><strong>Note</strong>: This function is thread safe with different transactions.</p>
<p><strong>Warning</strong>: The call fails if the referenced transaction is not in the ACTIVE state.</p>
<p><strong>Remark</strong>: </p>
<ul>
<li><code>kvdb</code> must not be NULL. </li>
<li><code>txn</code> must not be NULL.</li>
</ul>
<h3 id="function-hse_kvdb_txn_alloc">function hse_kvdb_txn_alloc</h3>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">hse_kvdb_txn_alloc</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Allocate transaction object. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__KVDB/#function-hse_kvdb_open">hse_kvdb_open()</a>.</li>
</ul>
<p><strong>Return</strong>: The allocated transaction structure. </p>
<p><strong>Note</strong>: This function is thread safe.</p>
<p><strong>Remark</strong>: <code>kvdb</code> must not be NULL.</p>
<p>This object can and should be re-used many times to avoid the overhead of allocation.</p>
<h3 id="function-hse_kvdb_txn_begin">function hse_kvdb_txn_begin</h3>
<div class="highlight"><pre><span></span><code><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_txn_begin</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Initiate transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__KVDB/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: Error status. </p>
<p><strong>Note</strong>: This function is thread safe with different transactions.</p>
<p><strong>Warning</strong>: The call fails if the transaction handle refers to an ACTIVE transaction.</p>
<p><strong>Remark</strong>: </p>
<ul>
<li><code>kvdb</code> must not be NULL. </li>
<li><code>txn</code> must not be NULL.</li>
</ul>
<h3 id="function-hse_kvdb_txn_commit">function hse_kvdb_txn_commit</h3>
<div class="highlight"><pre><span></span><code><span class="n">hse_err_t</span><span class="w"> </span><span class="n">hse_kvdb_txn_commit</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Commit all the mutations of the referenced transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__KVDB/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: Error status </p>
<p><strong>Note</strong>: This function is thread safe with different transactions.</p>
<p><strong>Warning</strong>: The call fails if the referenced transaction is not in the ACTIVE state.</p>
<p><strong>Remark</strong>: </p>
<ul>
<li><code>kvdb</code> must not be NULL. </li>
<li><code>txn</code> must not be NULL.</li>
</ul>
<h3 id="function-hse_kvdb_txn_free">function hse_kvdb_txn_free</h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">hse_kvdb_txn_free</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Free transaction object. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__KVDB/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle.</li>
</ul>
<p><strong>Note</strong>: </p>
<ul>
<li>If the transaction handle refers to an ACTIVE transaction, the transaction is aborted prior to being freed.</li>
<li>This function is thread safe with different transactions.</li>
</ul>
<p><strong>Warning</strong>: After invoking this function, calling any other transaction functions with this handle will result in undefined behavior.</p>
<p><strong>Remark</strong>: </p>
<ul>
<li><code>kvdb</code> must not be NULL. </li>
<li><code>txn</code> must not be NULL. </li>
</ul>
<h3 id="function-hse_kvdb_txn_state_get">function hse_kvdb_txn_state_get</h3>
<div class="highlight"><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nc">hse_kvdb_txn_state</span><span class="w"> </span><span class="n">hse_kvdb_txn_state_get</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kvdb</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">hse_kvdb_txn</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">txn</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Retrieve the state of the referenced transaction. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>kvdb</strong> KVDB handle from <a href="/2.x/api/Modules/group__KVDB/#function-hse_kvdb_open">hse_kvdb_open()</a>. </li>
<li><strong>txn</strong> KVDB transaction handle from <a href="/2.x/api/Modules/group__TRANSACTIONS/#function-hse_kvdb_txn_alloc">hse_kvdb_txn_alloc()</a>.</li>
</ul>
<p><strong>Return</strong>: Transaction's state. </p>
<p><strong>Remark</strong>: </p>
<ul>
<li><code>kvdb</code> must not be NULL. </li>
<li><code>txn</code> must not be NULL.</li>
</ul>
<p>This function is thread safe with different transactions.</p>
<hr />
<p>Updated on 17 November 2022 at 15:10:57 CST</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../group__KVS/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Key-Value Store (KVS)" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Key-Value Store (KVS)
            </div>
          </div>
        </a>
      
      
        
        <a href="../group__CURSORS/" class="md-footer__link md-footer__link--next" aria-label="Next: Cursors" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Cursors
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020 - 2022 Micron Technology, Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.sections"], "search": "../../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>